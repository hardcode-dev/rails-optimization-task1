## Case 1

### Метрика на 25000 тысячах строк
* (1.000 in   5.441479s, (5.4 - 5.8) до начала оптимизации с включенным GC)
  `benchmark/benchmark_cpu_work.rb`
### Бюджет на метрику
* На 25000 тысячах lines хочу чтобы время реальной работы программы уменьшилось до 2 секунд

### Пишу спеку (для фиксации текущей метрики)
`rspec spec/work_performance_spec.rb:13`

### Применил профилировщик stackprof speedscope
* Проблема в использовании select

`user_sessions = sessions.select { |session| session['user_id'] == user['id'] }`

Каждый раз делается селект из массива сессий. O(n) где n количество сессий, также это всё
происходит в рамках цикла по юзер лайнам (n * m)

**Решение:** 
Один раз сгрупировать сессии по юзерам вне цикла
Далее внутри цикла использовать вытаскивать сессии для конкретного пользователя по хешу (O(1))

**Результат после оптимизационных действий**
На 25 тысяч строк метрика снизилась c 5.8 секунд до 632 ms (~ в 9.1 раза)

### Обновил тест на производительность
`rspec spec/work_performance_spec.rb:13`
